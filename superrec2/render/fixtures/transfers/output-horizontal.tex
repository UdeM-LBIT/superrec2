\tikzset{
    x={1pt},
    y={-1pt},
    species border/.style={
        line width={1pt},
        shorten <={-1pt / 2 + 0.05pt},
        shorten >={-1pt / 2 + 0.05pt},
    },
    species label/.style={
        font=\bfseries,
        midway,
        anchor=west,
        xshift=10
    },
    branch/.style={
        line width={0.5pt},
        preaction={
            draw, white, -{},
            line width={4pt},
            shorten <={0.5pt},
            shorten >={0.5pt},
        },
    },
    transfer branch/.style={
        branch,
        -Stealth,
    },
    loss/.style={
        draw, cross out, thick,
        line width={0.5pt},
        inner sep=0pt,
        outer sep=0pt,
        minimum width={3},
        minimum height={3},
    },
    extant gene/.style={
        circle, fill,
        outer sep=0pt, inner sep=0pt,
        minimum size={3},
        label={
            [fill=white,
                inner xsep=4pt, inner ysep=0pt,
                outer xsep=0pt, outer ysep=0pt]
            right:#1
        },
    },
    branch node/.style={
        draw, fill=white,
        outer sep=0pt, inner xsep=0pt, inner ysep=2pt,
        line width={0.5pt},
    },
    speciation/.style={
        branch node, rounded rectangle,
        inner xsep=4pt,
        minimum width={8},
        minimum height={8},
    },
    duplication/.style={
        branch node, rectangle,
        inner xsep=4pt,
        minimum width={8},
        minimum height={8},
    },
    horizontal gene transfer/.style={
        branch node, signal, signal to=east and west,
        minimum width={8},
        minimum height={8},
    },
}
\begin{tikzpicture}
% species
\draw[species border] (43.5,24.61994) -| (18.5,80.33992) -- (0,80.33992);
\draw[species border] (92.84037000000001,129.95986) -| (18.5,105.33992) -- (0,105.33992);
\draw[species border] (43.5,54.61994) -| (43.5,105.33992) |- (92.84037000000001,105.33992);
\draw[species border] (92.00037,0) -| (62.000370000000004,24.61994) -- (43.5,24.61994);
\draw[species border] (92.00037,80.33992) -| (62.000370000000004,54.61994) -- (43.5,54.61994);
\draw[species border] (92.00037,24.61994) -| (92.00037,54.61994) |- (92.00037,54.61994);
\draw[species border] (92.00037,0) -- (123.76337000000001,0) -- node[species label] {X} (123.76337000000001,24.61994) -- (92.00037,24.61994);
\draw[species border] (92.00037,54.61994) -- (123.76337000000001,54.61994) -- node[species label] {Y} (123.76337000000001,80.33992) -- (92.00037,80.33992);
\draw[species border] (92.84037000000001,105.33992) -- (123.76337000000001,105.33992) -- node[species label] {Z} (123.76337000000001,129.95986) -- (92.84037000000001,129.95986);
% gene branches
\draw[branch] (43.5,32.86994) -| (26.75,97.08992) |- (92.84037000000001,112.24490499999999);
\draw[branch] (37.75,86.08992) -- (37.75,105.33992);
\draw[branch] (37.75,86.08992) |- (43.5,46.36994);
\draw[branch] (14.25,91.58992) -- (0,91.58992);
\draw[branch] (37.75,86.08992) -| (14.25,91.58992) |- (26.75,97.08992);
\draw[branch] (70.25037,46.36994) -- (43.5,46.36994);
\draw[branch] (92.00037,17.714955) -| (70.25037,46.36994) |- (92.00037,73.159925);
\draw[branch] (92.00037,6.904985) -| (83.75037,32.86994) |- (92.00037,61.799935000000005);
\draw[branch] (57.750185,32.86994) -- (43.5,32.86994);
\draw[branch] (83.75037,32.86994) |- (57.750185,32.86994);
\draw[branch] (112.38187,17.714955) -- (92.00037,17.714955);
\draw[branch] (112.38187,6.904985) -- (92.00037,6.904985);
\draw[branch] (112.38187,73.15992500000002) -- (92.00037,73.159925);
\draw[branch] (112.38187,61.799935000000005) -- (92.00037,61.799935000000005);
\draw[branch] (112.80187000000001,123.054875) -- (92.84037000000001,123.054875);
\draw[branch] (112.80187000000001,112.24490499999999) -- (92.84037000000001,112.24490499999999);
% gene transfers
\draw[transfer branch] (57.750185,32.86994) to[bend right=35] (92.84037000000001,123.054875);
% events
\node[speciation] at (26.75,97.08992) {};
\node [loss] at (37.75,105.33992) {};
\node[duplication] at (14.25,91.58992) {};
\node[speciation] at (70.25037,46.36994) {};
\node[speciation] at (83.75037,32.86994) {};
\node[horizontal gene transfer] at (57.750185,32.86994) {};
\node[extant gene={x\textsubscript{1}}] at (103.50037,17.714955) {};
\node[extant gene={x\textsubscript{2}}] at (103.50037,6.904985) {};
\node[extant gene={y\textsubscript{1}}] at (103.50037,73.15992500000002) {};
\node[extant gene={y\textsubscript{2}}] at (103.50037,61.799935000000005) {};
\node[extant gene={z\textsubscript{1}}] at (104.34037000000001,123.054875) {};
\node[extant gene={z\textsubscript{2}}] at (104.34037000000001,112.24490499999999) {};
\end{tikzpicture}
